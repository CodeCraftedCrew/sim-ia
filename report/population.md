# Sección 4

## Generación de poblaciones

El proceso de generación poblacional se fundamenta en la necesidad de crear poblaciones de pasajeros que sean representativas de la realidad demográfica y de movilidad de La Habana. Para lograr esto, comenzamos con datos concretos sobre la distribución de la población en cada municipio de la ciudad. Estos datos se detallan en 'case_study' y las distribuciones de probabilidad inferidas en base a ellos se guardan en 'demographic_data.json'. La clase PopulationGenerator utiliza un enfoque basado en la probabilidad acumulativa para asignar valores aleatorios a una variedad de atributos demográficos, como el mucicipio de residencia, el estado laboral, el lugar de trabajo y el nivel educativo y generar personas con esto.

Los atributos se generan en un orden específico para que las peronas sean lo más realistas posibles. Primero generamos su municipio, con el municipio generamos su estatus de empleo usando los datos sobre la PEA presentados en el caso de estudio, en base a esto generamos el municipio en el que trabajan, y así sucesivamente. Una vez generados estos datos en base a sus distribuciones estimadas, usamos lógica difusa para generar una posible cantidad de dinero y un posible tiempo de espera.

## Sistemas difusos para la generación de datos:

El uso de sistemas difusos en la generación de poblaciones de pasajeros agrega un nivel de realismo y aleatoriedad controlada al proceso. En nuestro caso, empleamos un sistema difuso para modelar ciertos atributos demográficos y de comportamiento de viaje, como el nivel de ingresos y el tiempo máximo de espera en una parada. En ambos sistemas se utilizó la libreria skfuzzy para simplificar el trabajo.

El sistema difuso FuzzySystemMoney se encarga de inferir un estimado del dinero con que anda cada individuo en función de su edad y municipio de residencia. Utiliza reglas difusas basadas en datos históricos para asignar un nivel de ingresos que se ajuste a la distribución observada en la población real. Por ejemplo reconocimos una tendencia a más altos ingresos en municipios como Plaza y Playa en comparación con otros municipios como Arroyo Naranjo. Además, las personas más jovenes o los ancianos tenían más tendencia a tener bajos ingresos que la población adulta. Aunque 'money' representa el dinero con el que anda la persona y no su nivel geeral de ingresos, para simplificar el problema asumimos una equivalencia. Dado el bajo coste de los vehículos que simulamos, el dinero no representa un factor tan determinante y no será un problema para la mayoría de personas que se simularán, aún así lo incluímos para tener en cuenta el casos posibles pero poco probables, como que una persona no tenga dinero suficiente para una gacela y tenga que optar obligatoriamente por las guaguas.

El sistema difuso FuzzySystemWaitingTime determina el tiempo máximo de espera en una parada para cada individuo, considerando factores como la edad, el dinero con el que andan y el estado laboral. Para definir las reglas difusas se consideró que por ejemplo las personas más jóvenes suelen ser más impacientes. Además un trabajador o un estudiante suele estar más apurado que una persona en un viaje por motivos de ocio. Además las personas con menos dinero serán más pacientes ya que su capacidad para optar por alternativas de transporte menos económica es más limitada.
